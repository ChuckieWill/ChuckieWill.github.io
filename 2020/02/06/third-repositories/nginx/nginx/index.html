<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="nginx nginx用于部署项目">
<meta property="og:type" content="article">
<meta property="og:title" content="nginx的使用">
<meta property="og:url" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/index.html">
<meta property="og:site_name" content="Chuckie&#39;s Blog">
<meta property="og:description" content="nginx nginx用于部署项目">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/1590059550958.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20200926102856390.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/1590059470671.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20211117224324926.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20211117225214421.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20211117231353942.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20211120144959605.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20211120150215367.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20200926200045670.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20200926200342876.png">
<meta property="og:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/image-20200926123759270.png">
<meta property="article:published_time" content="2020-02-06T05:45:50.000Z">
<meta property="article:modified_time" content="2024-09-18T15:06:07.678Z">
<meta property="article:author" content="Chuckie">
<meta property="article:tag" content="CentOS">
<meta property="article:tag" content="nginx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/1590059550958.png">

<link rel="canonical" href="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>nginx的使用 | Chuckie's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Chuckie's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/06/third-repositories/nginx/nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Chuckie">
      <meta itemprop="description" content="Bright future">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chuckie's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          nginx的使用
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-06 13:45:50" itemprop="dateCreated datePublished" datetime="2020-02-06T13:45:50+08:00">2020-02-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-18 23:06:07" itemprop="dateModified" datetime="2024-09-18T23:06:07+08:00">2024-09-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/third-repositories/" itemprop="url" rel="index"><span itemprop="name">third-repositories</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/third-repositories/nginx/" itemprop="url" rel="index"><span itemprop="name">nginx</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h1><ul>
<li><strong><code>nginx</code>用于部署项目</strong></li>
</ul>
<h2 id="一、基础介绍"><a href="#一、基础介绍" class="headerlink" title="一、基础介绍"></a>一、基础介绍</h2><p>主机—–&gt; 操作系统（windows/linux）—–&gt;tomcat/nginx</p>
<h3 id="1-1-nginx基本概念"><a href="#1-1-nginx基本概念" class="headerlink" title="1.1 nginx基本概念"></a>1.1 nginx基本概念</h3><ul>
<li><p>Nginx 是高性能的 HTTP 和反向代理的服务器，处理高并发能力是十分强大的， 能经受高负载的考验 有报告表明能支持高达 50,000 个并发连接数。</p>
</li>
<li><p>Nginx支持热部署。它的启动特别容易, 并且几乎可以做到7*24不间断运行，即使运行数个月也不需要重新启动。你还能够在不间断服务的情况下，对软件版本进行进行升级。</p>
</li>
</ul>
<h3 id="1-2-在windows上安装nginx及使用"><a href="#1-2-在windows上安装nginx及使用" class="headerlink" title="1.2 在windows上安装nginx及使用"></a>1.2 在windows上安装nginx及使用</h3><h4 id="1-2-1-安装"><a href="#1-2-1-安装" class="headerlink" title="1.2.1 安装"></a>1.2.1 安装</h4><ul>
<li><p><a href="http://nginx.org/" target="_blank" rel="noopener">nginx官网</a></p>
</li>
<li><p><a href="http://mirrors.sohu.com/nginx/" target="_blank" rel="noopener">国内镜像下载地址</a></p>
</li>
<li><p>naginx版本</p>
<ul>
<li>mainline version ：主力版本，开发版</li>
<li>stable version ：最稳定的版本，生产环境上建议使用的版本</li>
<li>legacy versions： 遗留老版本的稳定版</li>
</ul>
</li>
<li><p>下载</p>
<ul>
<li>选择stable version  或者   点击官网右栏download</li>
</ul>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/1590059550958.png" alt></p>
</li>
</ul>
<p>  <img src="/2020/02/06/third-repositories/nginx/nginx/image-20200926102856390.png" alt="image-20200926102856390"></p>
<ul>
<li><p>选择windows</p>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/1590059470671.png" alt></p>
</li>
</ul>
<h4 id="1-2-2-使用"><a href="#1-2-2-使用" class="headerlink" title="1.2.2  使用"></a>1.2.2  使用</h4><ul>
<li><p>下载的时zip文件，解压后，进入解压的文件夹，双击nginx.exe即可启动nginx</p>
</li>
<li><p>关于nginx的cmd终端命令  <em>cmd终端切换到nginx的根目录下</em></p>
<ul>
<li><code>nginx.exe</code>: 启动nginx   或者直接双击nginx.exe文件也可启动nginx<ul>
<li>网址输入localhost     页面显示welcome nginx则启动成功</li>
<li>每次配置文件修改后都需要重启nginx</li>
</ul>
</li>
<li><code>nginx -s stop</code>:中断运行</li>
<li><code>nginx -s quit</code>:正常退出运行</li>
<li><code>nginx -s reload</code> : 重启niginx</li>
</ul>
</li>
</ul>
<h3 id="1-3-在Linux-CentOS-系统安装nginx及使用"><a href="#1-3-在Linux-CentOS-系统安装nginx及使用" class="headerlink" title="1.3 在Linux(CentOS)系统安装nginx及使用"></a>1.3 在Linux(CentOS)系统安装nginx及使用</h3><h4 id="1-3-1-安装"><a href="#1-3-1-安装" class="headerlink" title="1.3.1 安装"></a>1.3.1 安装</h4><h5 id="1-终端切换为root用户"><a href="#1-终端切换为root用户" class="headerlink" title="1 )终端切换为root用户"></a>1 )终端切换为root用户</h5><ul>
<li>输入的密码为服务器密码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure>



<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20211117224324926.png" alt="image-20211117224324926"></p>
<h5 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2)安装依赖"></a>2)安装依赖</h5><blockquote>
<p>在任意目录下执行</p>
</blockquote>
<ul>
<li>gcc编译是否安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查安装：yum list installed | grep gcc</span><br><span class="line">执行安装：yum install gcc -y</span><br></pre></td></tr></table></figure>

<ul>
<li>openssl库编译是否安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查安装：yum list installed | grep openssl</span><br><span class="line">执行安装：yum install openssl openssl-devel -y</span><br></pre></td></tr></table></figure>

<ul>
<li>pcre库编译是否安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查安装：yum list installed | grep pcre</span><br><span class="line">执行安装：yum install pcre pcre-devel -y</span><br></pre></td></tr></table></figure>

<ul>
<li>zlib库编译是否安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查安装：yum list installed | grep zlib</span><br><span class="line">执行安装：yum install zlib zlib-devel -y</span><br></pre></td></tr></table></figure>

<ul>
<li>一次性安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一次性安装: yum install gcc openssl openssl-devel pcre pcre-devel zlib zlib-devel -y</span><br></pre></td></tr></table></figure>

<p>( -y 代表自动安装 ， 自动选择 Y)</p>
<h5 id="3-下载nginx"><a href="#3-下载nginx" class="headerlink" title="3)下载nginx"></a>3)下载nginx</h5><ul>
<li>再切换到/usr/loacl目录下下载Nginx</li>
</ul>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20211117225214421.png" alt="image-20211117225214421"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd  &#x2F;usr&#x2F;local</span><br></pre></td></tr></table></figure>

<ul>
<li>下载</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.18.0.tar.gz</span><br></pre></td></tr></table></figure>

<ul>
<li>解压<ul>
<li>解压后的文件名为：nginx-1.18.0， 该文件就在/usr/local下</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.18.0.tar.gz</span><br></pre></td></tr></table></figure>

<h5 id="4-安装nginx"><a href="#4-安装nginx" class="headerlink" title="4)安装nginx"></a>4)安装nginx</h5><ul>
<li>打开nginx解压后路径, 即切换到nginx-1.18.0目录下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd nginx-1.18.0</span><br></pre></td></tr></table></figure>

<ul>
<li>指定安装路径 (–prefix 是指定nginx安装路径)， 在终端执行如下2条命令完成安装<ul>
<li>安装完成后会在/usr/local目录下生成nginx文件夹</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-使用-nginx常用命令"><a href="#1-3-2-使用-nginx常用命令" class="headerlink" title="1.3.2 使用(nginx常用命令)"></a>1.3.2 使用(nginx常用命令)</h4><blockquote>
<p><strong>注意：执行以下命令时，终端先切换到/usr/local/nginx/sbin目录下</strong></p>
</blockquote>
<h5 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h5><ul>
<li>切换到/usr/local/nginx/sbin文件夹下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>或者切换到/usr/local/nginx文件夹下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;sbin&#x2F;nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>或者按配置文件启动</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;conf&#x2F;nginx.conf</span><br></pre></td></tr></table></figure>

<h5 id="检测nginx是否启动"><a href="#检测nginx是否启动" class="headerlink" title="检测nginx是否启动"></a>检测nginx是否启动</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>若启动成功终端如下</li>
</ul>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20211117231353942.png" alt="image-20211117231353942"></p>
<h5 id="重新加载nginx"><a href="#重新加载nginx" class="headerlink" title="重新加载nginx"></a>重新加载nginx</h5><ul>
<li>例如修改了nginx.conf后则需要重新加载才能更新修改的配置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s reload</span><br></pre></td></tr></table></figure>

<h5 id="关闭nginx"><a href="#关闭nginx" class="headerlink" title="关闭nginx"></a>关闭nginx</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s stop</span><br></pre></td></tr></table></figure>



<h4 id="1-3-3-防火墙问题"><a href="#1-3-3-防火墙问题" class="headerlink" title="1.3.3 防火墙问题"></a>1.3.3 防火墙问题</h4><blockquote>
<p>若是在windows的虚拟机的linux(CentOS)系统安装的nginx, 则启动nginx后不能在浏览器正常访问，需要开放防火墙对80端口的限制</p>
</blockquote>
<ul>
<li>查看f防火墙开放的端口号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<ul>
<li>设置开放的端口号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port&#x3D;80&#x2F;tcp --permanent</span><br></pre></td></tr></table></figure>

<ul>
<li>重启防火墙<ul>
<li>重启后才能看到80/tcp开放成功了</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20211120144959605.png" alt="image-20211120144959605"></p>
<ul>
<li>终端出现如下提示，则是防火墙没有开启</li>
</ul>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20211120150215367.png" alt="image-20211120150215367"></p>
<ul>
<li>开启，关闭及查看防火墙状态命令<ul>
<li>开启防火墙：systemctl start firewalld</li>
<li>关闭防火墙：systemctl stop firewalld</li>
<li>查看防火墙状态：systemctl status firewalld</li>
</ul>
</li>
<li>移除端口<ul>
<li>移除后，也需要重启防火强才能看到移除了</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --remove-port&#x3D;80&#x2F;tcp --permanent</span><br></pre></td></tr></table></figure>



<h3 id="1-4-Nginx的配置文件"><a href="#1-4-Nginx的配置文件" class="headerlink" title="1.4  Nginx的配置文件"></a>1.4  Nginx的配置文件</h3><blockquote>
<p><a href="https://www.cnblogs.com/paulwhw/articles/11116363.html" target="_blank" rel="noopener"><code>nginx.conf</code>文件解析</a></p>
<ul>
<li>配置文件的位置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linux下：&#x2F;usr&#x2F;loacal&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</span><br><span class="line">wIndows下： 解压的nginx文件夹&#x2F;conf&#x2F;nginx.conf</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>配置文件的内容 :</strong></p>
<p>1)全局块：配置服务器整体运行的配置指令</p>
<ul>
<li>从配置文件开始到 events 块之间的内容，主要会设置一些影响nginx 服务器整体运行的配置指令，主要包括配置运行 Nginx 服务器的用户（组）、允许生成的 worker process 数，进程 PID 存放路径、日志存放路径和类型以及配置文件的引入等。</li>
<li>例如：worker_processes <ul>
<li>这是 Nginx 服务器并发处理服务的关键配置，worker_processes 值越大，可以支持的并发处理量也越多，但是会受到硬件、软件等设备的制约，建议设置为等于CPU总核心数</li>
</ul>
</li>
</ul>
<p>2)events 块 ：影响 Nginx 服务器与用户的网络连接</p>
<ul>
<li>events 块涉及的指令主要影响 Nginx 服务器与用户的网络连接，常用的设置包括是否开启对多 work process 下的网络连接进行序列化，是否允许同时接收多个网络连接，选取哪种事件驱动模型来处理连接请求，每个 word process 可以同时支持的最大连接数等。</li>
</ul>
<p>3)http 块</p>
<ul>
<li>这算是 Nginx 服务器配置中最频繁的部分，代理、缓存和日志定义等绝大多数功能和第三方模块的配置都在这里。</li>
<li>http 块也可以包括 http全局块、server 块。</li>
</ul>
<p>3.1)http 全局块</p>
<ul>
<li>http全局块配置的指令包括文件引入、MIME-TYPE 定义、日志自定义、连接超时时间、单链接请求数上限等。</li>
</ul>
<p>3.2)server 块</p>
<ul>
<li>这块和虚拟主机有密切关系，虚拟主机从用户角度看，和一台独立的硬件主机是完全一样的，该技术的产生是为了节省互联网服务器硬件成本。</li>
<li>每个 http 块可以包括多个 server 块，而每个 server 块就相当于一个虚拟主机。</li>
<li>而每个 server 块也分为全局 server 块，以及可以同时包含多个 locaton 块。</li>
</ul>
<p>3.2.1)全局 server 块</p>
<ul>
<li>最常见的配置是本虚拟机主机的监听配置和本虚拟主机的名称或IP配置。</li>
</ul>
<p>3.2.2)location 块</p>
<ul>
<li>一个 server 块可以配置多个 location 块。</li>
<li>这块的主要作用是基于 Nginx 服务器接收到的请求字符串（例如 server_name/uri-string），对虚拟主机名称（也可以是IP别名）之外的字符串（例如 前面的 /uri-string）进行匹配，对特定的请求进行处理。地址定向、数据缓存和应答控制等功能，还有许多第三方模块的配置也在这里进行。</li>
</ul>
<p><strong><code>nginx.conf</code>文件</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#user  nobody;</span><br><span class="line">worker_processes  1;</span><br><span class="line">#worker_processes数值越大并发能力越强  处理并发数的配置 </span><br><span class="line"></span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line">#错误存放的地址</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#以上为全局快</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#以上为events块</span><br><span class="line">#worker_connections数值越大并发能力越强   支持的最大连接数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">    #                  '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">    #                  '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    #include     servers/*.conf;</span><br><span class="line">    server &#123;</span><br><span class="line">      listen       80; </span><br><span class="line">      server_name  test.com;</span><br><span class="line"></span><br><span class="line">      location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8888;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">		#以上为location块</span><br><span class="line">		#root: 将接收的请求根据html路径去查找静态资源</span><br><span class="line">		#index: 默认去上述中找到index.html或index.htm 以响应用户</span><br><span class="line">    &#125;</span><br><span class="line">	#以上是server块</span><br><span class="line">	#listen： nginx监听的端口</span><br><span class="line">	#server_name: nginx接收的ip地址或域名</span><br><span class="line">&#125;</span><br><span class="line">#以上为http块</span><br><span class="line">#include 表示从外部引入文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br></pre></td></tr></table></figure>



<h2 id="二、Nginx的反向代理"><a href="#二、Nginx的反向代理" class="headerlink" title="二、Nginx的反向代理"></a>二、Nginx的反向代理</h2><h3 id="2-1-正向代理与反向代理"><a href="#2-1-正向代理与反向代理" class="headerlink" title="2.1 正向代理与反向代理"></a>2.1 正向代理与反向代理</h3><p><strong>正向代理</strong></p>
<ol>
<li>正向代理是由客户端设立的</li>
<li>客户端了解代理服务器和目标服务器都是谁</li>
<li>帮助实现突破访问权限，提高访问的速度，对目标服务器隐藏客户端的ip地址</li>
</ol>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20200926200045670.png" alt="image-20200926200045670"></p>
<p><strong>反向代理</strong></p>
<ol>
<li>反向代理服务器是配置在服务端的</li>
<li>客户端是不知道具体访问的是哪台服务器</li>
<li>达到负载均衡，并且可以隐藏服务器真正的ip地址</li>
</ol>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20200926200342876.png" alt="image-20200926200342876"></p>
<h3 id="2-2-反向代理配置"><a href="#2-2-反向代理配置" class="headerlink" title="2.2 反向代理配置"></a>2.2 反向代理配置</h3><ul>
<li><p>按<code>nginx-1.18.0\conf</code>打开<code>nginx.conf</code>文件</p>
<ul>
<li>添加<code>include servers/*.conf</code><ul>
<li>注意添加的位置，在<code>server</code>上面</li>
<li><code>include servers/*.conf;</code>： 导入当前文件所在文件夹下的文件夹servers下的所有.conf文件</li>
<li>servers文件夹和文件夹下的文件都是自定义的，是自定义的配置文件</li>
</ul>
</li>
</ul>
<p><img src="/2020/02/06/third-repositories/nginx/nginx/image-20200926123759270.png" alt="image-20200926123759270"></p>
</li>
<li><p><code>servers/test.conf</code>代理配置</p>
<ul>
<li>新建<code>nginx-1.18.0\conf、servers、test.conf</code>文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.conf</span></span><br><span class="line">server &#123;                            <span class="comment">//server表示nginx启动的本地服务</span></span><br><span class="line">  listen       <span class="number">80</span>;                  <span class="comment">//80 是nginx本地服务的端口号</span></span><br><span class="line">  server_name  localhost;            <span class="comment">//localhost  是nginx本地服务的域名地址</span></span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http:<span class="comment">//127.0.0.1:8888/;   //nginx代理的地址访问localhost即会跳转到这个地址</span></span><br><span class="line">    proxy_set_header Host $host;        <span class="comment">//host延用localhost而不是http://127.0.0.1:8888的host</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>也可直接将<code>test.cong</code>文件的内容加在<code>nginx.conf</code>文件中，效果是一样的，只是这样分离更方便管理不同的配置</p>
<ul>
<li>添加在<code>nginx.conf</code>中<code>server</code>配置的地方</li>
</ul>
</li>
</ul>
<h3 id="2-3-location路径映射"><a href="#2-3-location路径映射" class="headerlink" title="2.3 location路径映射"></a>2.3 location路径映射</h3><p><strong>理解<code>\</code></strong></p>
<ul>
<li>location后面的<code>“/”</code>指的是上面<code>server_name  localhost;</code>的<code>localhost</code></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;                            </span><br><span class="line">  listen       80;                  </span><br><span class="line">  server_name  localhost;            </span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:8888/;  </span><br><span class="line">    proxy_set_header Host $host;       </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>location匹配方式</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 1. = 匹配</span><br><span class="line">location = / &#123;</span><br><span class="line">	#精准匹配，主机名后面不带任何的字符串</span><br><span class="line">&#125; </span><br><span class="line">#假如server_name是localhost  则只能精准匹配localhost   而localhost/xxx则不能匹配  因为多了/xxx</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">	#只要有/即可匹配</span><br><span class="line">&#125; </span><br><span class="line">#假如server_name是localhost  则只要有localhost即可匹配   localhost和localhost/xxx等都可匹配</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 2. 通用匹配</span><br><span class="line">location /xxx &#123;</span><br><span class="line">	#匹配所有以/xxx开头的路径</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 3. 正则匹配</span><br><span class="line">location ~/xxx&#123;</span><br><span class="line">	#匹配所有以/xxx开头的路径   与通用匹配一样  只是优先级高</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 4. 匹配开头路径</span><br><span class="line">location ^~/xxx&#123;</span><br><span class="line">	#匹配所有以/xxx开头的路径   与通用匹配、正则匹配一样  只是优先级高于另外两个</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 5. 匹配结尾</span><br><span class="line">location ~*\.(gif|jpg|png)$&#123;</span><br><span class="line">	#匹配以gif|jpg|png结尾的路径</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>location匹配优先级</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(location = ) &gt; (location /xxx/yyy/xxx) &gt; (location^~) &gt; (location ~ , ~*) &gt; (location/起始路径) &gt; (location/)</span><br><span class="line">                                                                                                </span><br><span class="line">=匹配 &gt; 完全匹配 &gt; 开头匹配 &gt; 正则匹配和结尾匹配 &gt; 通用匹配(只有起始路径，匹配不全) &gt; 通用匹配(只有根路径匹配)</span><br></pre></td></tr></table></figure>

<ul>
<li>完全匹配： 目标路径是localhost/xxx/yyy/xxx  匹配路径也是localhost/xxx/yyy/xxx   完全一致</li>
<li>一般匹配从上面的优先级的后面往前匹配<strong>直到<code>(location^~)</code>为止，所以写配置文件的时候按上面的优先级顺序写</strong></li>
</ul>
<h2 id="三、Nginx的负载均衡"><a href="#三、Nginx的负载均衡" class="headerlink" title="三、Nginx的负载均衡"></a>三、Nginx的负载均衡</h2><h2 id="四、Nginx的动静分离"><a href="#四、Nginx的动静分离" class="headerlink" title="四、Nginx的动静分离"></a>四、Nginx的动静分离</h2><h2 id="五、Nginx集群"><a href="#五、Nginx集群" class="headerlink" title="五、Nginx集群"></a>五、Nginx集群</h2><h2 id="六、部署"><a href="#六、部署" class="headerlink" title="六、部署"></a>六、部署</h2><h3 id="6-1-本地部署"><a href="#6-1-本地部署" class="headerlink" title="6.1 本地部署"></a>6.1 本地部署</h3><h4 id="6-1-1-方式一："><a href="#6-1-1-方式一：" class="headerlink" title="6.1.1 方式一："></a>6.1.1 方式一：</h4><ul>
<li>双击nginx-1.18.0文件夹下nginx.exe文件  启动运行</li>
<li>网址输入localhost     页面显示welcome nginx则启动成功</li>
<li>删除nginx-1.18.0\html文件夹下的文件</li>
<li><strong>将需要部署的项目的dist文件夹下的所有文件及文件夹复制到nginx-1.18.0\html文件夹下</strong></li>
<li>网址再次输入localhost 则可查看部署项目了</li>
</ul>
<h4 id="6-1-2-方式二："><a href="#6-1-2-方式二：" class="headerlink" title="6.1.2 方式二："></a>6.1.2 方式二：</h4><ul>
<li>双击nginx-1.18.0文件夹下nginx.exe文件  启动运行</li>
<li>网址输入localhost     页面显示welcome nginx则启动成功</li>
<li><strong>将需要部署的项目的dist文件夹复制到nginx-1.18.0文件夹下</strong></li>
<li><strong>修改nginx-1.18.0\conf\nginx.conf文件</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;修改前</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    root   html;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;修改后</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    root   dist;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2远程部署"><a href="#6-2远程部署" class="headerlink" title="6.2远程部署"></a>6.2远程部署</h3><h4 id="6-2-1-部署流程"><a href="#6-2-1-部署流程" class="headerlink" title="6.2.1 部署流程"></a>6.2.1 部署流程</h4><ul>
<li><p>前置步骤：</p>
<ul>
<li>1 购买云服务器，Linux</li>
<li>2 购买域名、备案、解析域名与ip匹配</li>
</ul>
</li>
<li><p>安装软件，在云服务器上</p>
<ul>
<li>mysql</li>
<li>node</li>
<li>xampp</li>
<li>nginx</li>
</ul>
</li>
<li><p>nginx配置转发</p>
<ul>
<li>nginx端口设置为80</li>
<li>在云服务器上可以开启多个服务</li>
<li>nginx根据域名转发到对应的云服务器上的服务<ul>
<li>————- <em>此处可查看上文：2.3location路径映射</em>—————</li>
<li>例如：chu.com  转发到  云服务商开启的localhost:3000服务</li>
<li>例如：ckie.com  转发到  云服务商开启的localhost:4000服务</li>
</ul>
</li>
</ul>
</li>
<li><p>启动服务（node环境）</p>
<ul>
<li>不能直接在终端启动服务，因为终端关闭后，服务也关闭了</li>
<li>开启<strong>守护进程</strong>即终端关闭后，服务仍然运行<ul>
<li>使用<strong>pm2</strong>—-&gt;<a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener">pm2官网文档</a><ul>
<li>安装：<code>npm install pm2 -g</code></li>
<li>启动： <code>pm2 start app.js</code></li>
<li>查看：<code>pm2 list</code></li>
<li>停止：<code>pm2 stop app</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>tips</p>
<ul>
<li>免费的https: lets encrypt</li>
</ul>
</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/CentOS/" rel="tag"># CentOS</a>
              <a href="/tags/nginx/" rel="tag"># nginx</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/02/04/third-repositories/postcss-px-to-viewport/postcss-px-to-viewport/" rel="prev" title="postcss-px-to-viewport">
      <i class="fa fa-chevron-left"></i> postcss-px-to-viewport
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/02/08/third-repositories/fastclick/fastclick/" rel="next" title="fastclick">
      fastclick <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#nginx"><span class="nav-text">nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、基础介绍"><span class="nav-text">一、基础介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-nginx基本概念"><span class="nav-text">1.1 nginx基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-在windows上安装nginx及使用"><span class="nav-text">1.2 在windows上安装nginx及使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1-安装"><span class="nav-text">1.2.1 安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-2-使用"><span class="nav-text">1.2.2  使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-在Linux-CentOS-系统安装nginx及使用"><span class="nav-text">1.3 在Linux(CentOS)系统安装nginx及使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-1-安装"><span class="nav-text">1.3.1 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-终端切换为root用户"><span class="nav-text">1 )终端切换为root用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-安装依赖"><span class="nav-text">2)安装依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-下载nginx"><span class="nav-text">3)下载nginx</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-安装nginx"><span class="nav-text">4)安装nginx</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-2-使用-nginx常用命令"><span class="nav-text">1.3.2 使用(nginx常用命令)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#启动nginx"><span class="nav-text">启动nginx</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#检测nginx是否启动"><span class="nav-text">检测nginx是否启动</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#重新加载nginx"><span class="nav-text">重新加载nginx</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#关闭nginx"><span class="nav-text">关闭nginx</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-3-防火墙问题"><span class="nav-text">1.3.3 防火墙问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-Nginx的配置文件"><span class="nav-text">1.4  Nginx的配置文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、Nginx的反向代理"><span class="nav-text">二、Nginx的反向代理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-正向代理与反向代理"><span class="nav-text">2.1 正向代理与反向代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-反向代理配置"><span class="nav-text">2.2 反向代理配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-location路径映射"><span class="nav-text">2.3 location路径映射</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、Nginx的负载均衡"><span class="nav-text">三、Nginx的负载均衡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、Nginx的动静分离"><span class="nav-text">四、Nginx的动静分离</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、Nginx集群"><span class="nav-text">五、Nginx集群</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六、部署"><span class="nav-text">六、部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-本地部署"><span class="nav-text">6.1 本地部署</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-1-方式一："><span class="nav-text">6.1.1 方式一：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-2-方式二："><span class="nav-text">6.1.2 方式二：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2远程部署"><span class="nav-text">6.2远程部署</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-1-部署流程"><span class="nav-text">6.2.1 部署流程</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Chuckie"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Chuckie</p>
  <div class="site-description" itemprop="description">Bright future</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">116</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">57</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">100</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ChuckieWill" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ChuckieWill" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/codewyj.163.com" title="E-Mail → codewyj.163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.jianshu.com/u/de627226656c" title="https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;de627226656c" rel="noopener" target="_blank">简书</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="/images/me.png"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chuckie</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">17:04</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
